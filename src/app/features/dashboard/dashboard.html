<!-- src/app/features/dashboard/dashboard.html -->
<div class="grid">
  <!-- KPI 1 -->
  @if (!loadingStats()) {
    <div class="col-12 md:col-6 lg:col-3">
      <p-card>
        <div class="text-600 text-sm">Ενεργοί μαθητές</div>
        <div class="text-3xl font-semibold">{{ stats()?.active_learners }}</div>
      </p-card>
    </div>
  } @else {
    <div class="col-12 md:col-6 lg:col-3"><p-skeleton height="6rem" borderRadius="1rem"></p-skeleton></div>
  }

  <!-- KPI 2 -->
  @if (!loadingStats()) {
    <div class="col-12 md:col-6 lg:col-3">
      <p-card>
        <div class="text-600 text-sm">Καθηγητές / Εισηγητές</div>
        <div class="text-3xl font-semibold">{{ stats()?.active_instructors }}</div>
      </p-card>
    </div>
  } @else {
    <div class="col-12 md:col-6 lg:col-3"><p-skeleton height="6rem" borderRadius="1rem"></p-skeleton></div>
  }

  <!-- KPI 3: your model has 'session_today' -->
  @if (!loadingStats()) {
    <div class="col-12 md:col-6 lg:col-3">
      <p-card>
        <div class="text-600 text-sm">Μαθήματα σήμερα</div>
        <div class="text-3xl font-semibold">{{ stats()?.session_today }}</div>
      </p-card>
    </div>
  } @else {
    <div class="col-12 md:col-6 lg:col-3"><p-skeleton height="6rem" borderRadius="1rem"></p-skeleton></div>
  }

  <!-- KPI 4: your model has 'entrollments_this_month' -->
  @if (!loadingStats()) {
    <div class="col-12 md:col-6 lg:col-3">
      <p-card>
        <div class="text-600 text-sm">Εγγραφές (μήνας)</div>
        <div class="text-3xl font-semibold">{{ stats()?.entrollments_this_month }}</div>
      </p-card>
    </div>
  } @else {
    <div class="col-12 md:col-6 lg:col-3"><p-skeleton height="6rem" borderRadius="1rem"></p-skeleton></div>
  }

  <!-- Today's Sessions (click-to-roster) -->
  <div class="col-12">
    <app-today-sessions></app-today-sessions>
  </div>

  <!-- Weekly hours per instructor -->
  <div class="col-12">
    <p-card>
      <div class="text-lg font-semibold mb-3">Ώρες διδασκαλίας ανά καθηγητή (εβδομάδα)</div>

      @if (!loadingHours()) {
        <p-table [value]="hours()">
          <ng-template pTemplate="header">
            <tr>
              <th>Καθηγητής</th>
              <th class="text-right">Ώρες</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-row>
            <!-- your model property is 'intructor_name' -->
            <tr>
              <td>{{ getInstructorName(row) }}</td>
              <td class="text-right">{{ row.hours }}</td>
            </tr>
          </ng-template>
        </p-table>
      } @else {
        <p-skeleton height="8rem" borderRadius="1rem"></p-skeleton>
      }
    </p-card>
  </div>
</div>
